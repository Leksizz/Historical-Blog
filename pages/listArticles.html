<div class="container my-5" id="container">
</div>
<div class="container-fluid my-5">
    <nav aria-label="...">
        <ul class="pagination" id="pagination">
        </ul>
    </nav>
</div>
<script>
    const container = document.getElementById('container');
    const pagination = document.getElementById('pagination');
    const currentPage = parseInt(window.location.pathname.split('/')[2], 10);
    fetch('/getArticles')
        .then(response => response.json())
        .then(result => {
            const countArticles = result.length;
            const maxCountPage = 5;
            const countPage = Math.ceil(countArticles / maxCountPage);
            for (let j = 1; j <= countPage; j++) {
                const li = document.createElement('li');
                li.classList.add('page-item');
                if (j === currentPage) {
                    li.classList.add('page-item', 'active');
                }
                document.getElementById('pagination').appendChild(li);
                const btn = document.createElement('a');
                btn.classList.add('page-link');
                btn.href = "/listArticles/" + j;
                btn.innerText = j;
                li.appendChild(btn)
            }

            const btnBack = document.createElement('li');
            btnBack.classList.add('page-link');
            const aBack = document.createElement('a');
            btnBack.appendChild(aBack);
            aBack.innerHTML = "Назад";
            aBack.href = "/listArticles/" + (currentPage - 1);

            const btnStart = document.createElement('li');
            btnStart.classList.add('page-link');
            const aStart = document.createElement('a');
            btnStart.appendChild(aStart);
            const iconStart = document.createElement('i');
            iconStart.classList.add('fa-solid', 'fa-backward-fast');
            aStart.appendChild(iconStart);
            aStart.href = "/listArticles/" + 1;

            if (currentPage > 1) {
                pagination.insertAdjacentHTML('afterbegin', btnBack.outerHTML);
                pagination.insertAdjacentHTML('afterbegin', btnStart.outerHTML);
            }

            const btnNext= document.createElement('li');
            btnNext.classList.add('page-link');
            const aNext = document.createElement('a');
            btnNext.appendChild(aNext);
            aNext.innerHTML = "Вперёд";
            aNext.href = "/listArticles/" + (currentPage + 1);

            const btnEnd = document.createElement('li');
            btnEnd.classList.add('page-link');
            const aEnd = document.createElement('a');
            btnEnd.appendChild(aEnd);
            const iconEnd = document.createElement('i');
            iconEnd.classList.add('fa-solid', 'fa-forward-fast');
            aEnd.appendChild(iconEnd);
            aEnd.href = "/listArticles/" + countPage;

            if (currentPage < countPage) {
                pagination.insertAdjacentHTML('beforeend', btnNext.outerHTML);
                pagination.insertAdjacentHTML('beforeend', btnEnd.outerHTML);
            }


            for (let i = (currentPage - 1) * maxCountPage; i < currentPage * maxCountPage; i++) {
                if (result[i].id !== null) {
                    let article = result[i];
                    const a = document.createElement('a');
                    const div = document.createElement('div');
                    const p = document.createElement('p');
                    const hr = document.createElement('hr');
                    a.classList.add('h3');
                    a.href = "/article/" + article.id;
                    a.innerText = article.title;
                    div.innerHTML = article.content;
                    p.innerText = article.author;
                    container.append(a, div, p, hr);
                }
            }
        });
</script>