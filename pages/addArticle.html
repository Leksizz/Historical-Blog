<div class="my-5 ms-3">
    <h1>Новая тема:</h1>
    <form onsubmit="sendForm(this); return false" method="POST">
        <p class="mt-3">Заголовок</p>
        <input type="text" name="title">
        <p class="text-danger" id="errorTitle" hidden>Обязательное поле</p>
        <p class="mt-3">Ваша тема</p>
        <textarea name="article"></textarea><br/>
        <p class="text-danger" id="errorText" hidden>Обязательно поле</p>
        <input type="submit" value="Отправить">
    </form>
</div>
<script>
    const errorText = document.getElementById('errorText');
    const errorTitle = document.getElementById('errorTitle');

    function sendForm(form) {
        errorText.hidden = true;
        errorTitle.hidden = true;
        const formData = new FormData(form);
        fetch('/handlerAddArticle', {
            method: "POST",
            body: formData,
        }).then(response => response.json())
            .then(result => {
                const actions = {
                    'success': () => location.href = '/listArticles',
                    'errorTitle': () => errorTitle.hidden = false,
                    'errorText': () => errorText.hidden = false,
                    'error': () => {
                        errorTitle.hidden = false;
                        errorText.hidden = false;
                    },
                };
                actions[result.result]?.();
            })
    }

    let pageTitle = "Добавление статьи";
    document.getElementById('pageTitle').innerText = pageTitle;
</script>